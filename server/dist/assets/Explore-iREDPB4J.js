import{u as y,i as g,k as w,l as M,r as m,j as e,I as f}from"./index-wLWO9-d2.js";import{E as N}from"./Empty-ltZlBdUA.js";import{u as T,M as v}from"./useFilterWithUrlParams-ebCQAYQq.js";import{M as E}from"./MemoView-Hb4REtig.js";import{M as L}from"./MobileHeader-d_EUlUPT.js";import{D as S}from"./CommonDialog-ZOWzLRrT.js";import{g as u}from"./useDebounce-KloUpVAw.js";import{B as I}from"./Button-Y8r740D0.js";import"./useResponsiveWidth-huLhTKBL.js";import"./useControlled-c04xw6hS.js";import"./common-logcmh1j.js";import"./VisibilityIcon-nq_zBLTG.js";import"./Typography-Ugz7CGU8.js";import"./useLoading-1GM5JUMl.js";import"./useLocalStorage-fn64V-Iu.js";import"./Select-Gl6RUiyX.js";import"./createSvgIcon-LnoQSaos.js";import"./Checkbox-4xG-yJfH.js";import"./Link-B2ydOwab.js";import"./ResourceIcon-rz_9chuf.js";import"./Divider-PmcpRuGM.js";import"./last-IOi7af79.js";const X=()=>{const i=y(),x=g(),d=w(),n=M(),[h,l]=m.useState(!0),r=m.useRef(void 0),{tag:a,text:o}=T(),c=n.value.sort((t,s)=>u(s.displayTime)-u(t.displayTime));m.useEffect(()=>{r.current=void 0,n.reset(),p()},[a,o]);const p=async()=>{const t=['row_status == "NORMAL"',`visibilities == [${x?"'PUBLIC', 'PROTECTED'":"'PUBLIC'"}]`],s=[];a&&s.push(JSON.stringify(`#${a}`)),o&&s.push(JSON.stringify(o)),s.length>0&&t.push(`content_search == [${s.join(", ")}]`),l(!0);const j=await d.fetchMemos({pageSize:S,filter:t.join(" && "),pageToken:r.current});l(!1),r.current=j.nextPageToken};return e.jsxs("section",{className:"@container w-full max-w-5xl min-h-full flex flex-col justify-start items-center sm:pt-3 md:pt-6 pb-8",children:[e.jsx(L,{}),e.jsxs("div",{className:"relative w-full h-auto flex flex-col justify-start items-start px-4 sm:px-6",children:[e.jsx(v,{className:"px-2 pb-2"}),c.map(t=>e.jsx(E,{memo:t,showCreator:!0},`${t.id}-${t.displayTime}`)),h?e.jsxs("div",{className:"flex flex-row justify-center items-center w-full my-4 text-gray-400",children:[e.jsx(f.Loader,{className:"w-4 h-auto animate-spin mr-1"}),e.jsx("p",{className:"text-sm italic",children:i("memo.fetching-data")})]}):r.current?e.jsx("div",{className:"w-full flex flex-row justify-center items-center my-4",children:e.jsx(I,{variant:"plain",endDecorator:e.jsx(f.ArrowDown,{className:"w-5 h-auto"}),onClick:p,children:i("memo.fetch-more")})}):c.length===0&&e.jsxs("div",{className:"w-full mt-12 mb-8 flex flex-col justify-center items-center italic",children:[e.jsx(N,{}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:i("message.no-data")})]})]})]})};export{X as default};
