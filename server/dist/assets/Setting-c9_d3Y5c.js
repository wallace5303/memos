import{r as p,w as Ne,j as e,_ as j,a0 as Wt,v as _e,s as Be,x as q,aL as At,aC as Ge,aM as Ze,aD as mt,aN as Mt,aO as Ht,aH as Ot,ay as ut,aP as Et,aB as Qe,aG as We,aQ as Vt,aR as Jt,aS as Gt,u as L,c as Se,I as T,n as w,i as se,aT as He,aU as he,aV as qt,aW as xe,aX as Oe,b as Y,aY as Xt,m as Kt,ak as Yt,aZ as je,d as ae,V as Ae,f as Zt,a_ as Qt,a$ as ea,g as ta,b0 as aa,b1 as sa,b2 as ra,b3 as G,b4 as oa,b5 as na,b6 as ia}from"./index-wLWO9-d2.js";import{o as et,M as la}from"./MobileHeader-d_EUlUPT.js";import{i as tt,R as ze,c as ca}from"./common-logcmh1j.js";import{g as K,s as ie,U as Te}from"./CommonDialog-ZOWzLRrT.js";import{I as E,D as qe,M as Xe,a as Ke,b as te,U as ht,T as xt}from"./useResponsiveWidth-huLhTKBL.js";import{F as Ie,d as da,I as N,u as pt}from"./useLoading-1GM5JUMl.js";import{c as ma,u as at,s as M,n as Fe,d as gt,$ as ft,p as A,q as Le,F as ua,B as k,L as vt}from"./Button-Y8r740D0.js";import{u as ha}from"./useControlled-c04xw6hS.js";import{T as xa,a as $}from"./Typography-Ugz7CGU8.js";import{u as yt,C as pa}from"./Checkbox-4xG-yJfH.js";import{V as ga,b as fa,c as va,L as Ee}from"./VisibilityIcon-nq_zBLTG.js";import{L as bt,A as jt}from"./LocaleSelect-CC0qROH_.js";import{S as De,O as $e}from"./Select-Gl6RUiyX.js";import{D as X}from"./Divider-PmcpRuGM.js";import"./last-IOi7af79.js";import"./createSvgIcon-LnoQSaos.js";function ya(a,t=166){let r;function s(...o){const n=()=>{a.apply(this,o)};clearTimeout(r),r=setTimeout(n,t)}return s.clear=()=>{clearTimeout(r)},s}const ba=["onChange","maxRows","minRows","style","value"];function Ue(a){return parseInt(a,10)||0}const ja={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function st(a){return a==null||Object.keys(a).length===0||a.outerHeightStyle===0&&!a.overflow}const wa=p.forwardRef(function(t,r){const{onChange:s,maxRows:o,minRows:n=1,style:i,value:c}=t,l=Ne(t,ba),{current:m}=p.useRef(c!=null),d=p.useRef(null),g=ma(r,d),v=p.useRef(null),x=p.useRef(0),[f,S]=p.useState({outerHeightStyle:0}),y=p.useCallback(()=>{const C=d.current,U=et(C).getComputedStyle(C);if(U.width==="0px")return{outerHeightStyle:0};const z=v.current;z.style.width=U.width,z.value=C.value||t.placeholder||"x",z.value.slice(-1)===`
`&&(z.value+=" ");const u=U.boxSizing,P=Ue(U.paddingBottom)+Ue(U.paddingTop),_=Ue(U.borderBottomWidth)+Ue(U.borderTopWidth),W=z.scrollHeight;z.value="x";const J=z.scrollHeight;let H=W;n&&(H=Math.max(Number(n)*J,H)),o&&(H=Math.min(Number(o)*J,H)),H=Math.max(H,J);const B=H+(u==="border-box"?P+_:0),F=Math.abs(H-W)<=1;return{outerHeightStyle:B,overflow:F}},[o,n,t.placeholder]),b=(C,h)=>{const{outerHeightStyle:U,overflow:z}=h;return x.current<20&&(U>0&&Math.abs((C.outerHeightStyle||0)-U)>1||C.overflow!==z)?(x.current+=1,{overflow:z,outerHeightStyle:U}):C},R=p.useCallback(()=>{const C=y();st(C)||S(h=>b(h,C))},[y]);at(()=>{const C=()=>{const W=y();st(W)||Wt.flushSync(()=>{S(J=>b(J,W))})},h=()=>{x.current=0,C()};let U;const z=ya(h),u=d.current,P=et(u);P.addEventListener("resize",z);let _;return typeof ResizeObserver<"u"&&(_=new ResizeObserver(h),_.observe(u)),()=>{z.clear(),cancelAnimationFrame(U),P.removeEventListener("resize",z),_&&_.disconnect()}},[y]),at(()=>{R()}),p.useEffect(()=>{x.current=0},[c]);const V=C=>{x.current=0,m||R(),s&&s(C)};return e.jsxs(p.Fragment,{children:[e.jsx("textarea",j({value:c,onChange:V,ref:g,rows:n,style:j({height:f.outerHeightStyle,overflow:f.overflow?"hidden":void 0},i)},l)),e.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:v,tabIndex:-1,style:j({},ja.shadow,i,{paddingTop:0,paddingBottom:0})})]})});function Na(a){return Be("MuiSwitch",a)}const Sa=_e("MuiSwitch",["root","checked","disabled","action","input","thumb","track","focusVisible","readOnly","colorPrimary","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid","startDecorator","endDecorator"]),Ve=Sa;function ka(a){return Be("MuiRadio",a)}const Ca=_e("MuiRadio",["root","radio","icon","action","input","label","checked","disabled","focusVisible","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),we=Ca,za=["checked","checkedIcon","defaultChecked","disabled","disableIcon","overlay","label","id","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","color","variant","size","uncheckedIcon","value","component","slots","slotProps"],Ta=a=>{const{checked:t,disabled:r,disableIcon:s,focusVisible:o,color:n,variant:i,size:c}=a,l={root:["root",t&&"checked",r&&"disabled",o&&"focusVisible",i&&`variant${q(i)}`,n&&`color${q(n)}`,c&&`size${q(c)}`],radio:["radio",t&&"checked",r&&"disabled"],icon:["icon"],action:["action",t&&"checked",s&&r&&"disabled",o&&"focusVisible"],input:["input"],label:["label"]};return Le(l,ka,{})};function Ua(a,t){return typeof t=="object"&&t!==null?a===t:String(a)===String(t)}const Ra=M("span",{name:"JoyRadio",slot:"Root",overridesResolver:(a,t)=>t.root})(({ownerState:a,theme:t})=>{var r,s,o;return[j({"--Icon-fontSize":"var(--Radio-size)","--Icon-color":"currentColor"},a.size==="sm"&&{"--Radio-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Radio-gap, 0.5rem)"},a.size==="md"&&{"--Radio-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Radio-gap, 0.625rem)"},a.size==="lg"&&{"--Radio-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Radio-gap, 0.75rem)"},{position:a.overlay?"initial":"relative",display:"inline-flex",boxSizing:"border-box",minWidth:0,fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Radio-size)",color:t.vars.palette.text.primary,[`&.${we.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[a.color])==null?void 0:r.color}},a.disableIcon&&{color:(s=t.variants[a.variant])==null||(s=s[a.color])==null?void 0:s.color,[`&.${we.disabled}`]:{color:(o=t.variants[`${a.variant}Disabled`])==null||(o=o[a.color])==null?void 0:o.color}},a["data-parent"]==="RadioGroup"&&a["data-first-child"]===void 0&&{marginInlineStart:a.orientation==="horizontal"?"var(--RadioGroup-gap)":void 0,marginBlockStart:a.orientation==="horizontal"?void 0:"var(--RadioGroup-gap)"})]}),Pa=M("span",{name:"JoyRadio",slot:"Radio",overridesResolver:(a,t)=>t.radio})(({ownerState:a,theme:t})=>{var r,s,o,n,i;const c=(r=t.variants[`${a.variant}`])==null?void 0:r[a.color];return[j({"--Icon-color":a.color!=="neutral"||a.variant==="solid"?"currentColor":t.vars.palette.text.icon,margin:0,boxSizing:"border-box",width:"var(--Radio-size)",height:"var(--Radio-size)",borderRadius:"var(--Radio-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},a.disableIcon&&{display:"contents"},{[`&.${we.checked}`]:{"--Icon-color":"currentColor"}}),...a.disableIcon?[]:[j({},c,{backgroundColor:(s=c==null?void 0:c.backgroundColor)!=null?s:t.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(o=t.variants[`${a.variant}Hover`])==null?void 0:o[a.color]}},{"&:active":(n=t.variants[`${a.variant}Active`])==null?void 0:n[a.color]},{[`&.${we.disabled}`]:(i=t.variants[`${a.variant}Disabled`])==null?void 0:i[a.color]}]]}),Ia=M("span",{name:"JoyRadio",slot:"Action",overridesResolver:(a,t)=>t.action})(({theme:a,ownerState:t})=>{var r,s,o,n;return[{position:"absolute",textAlign:"left",borderRadius:`var(--Radio-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[a.focus.selector]:a.focus.default},...t.disableIcon?[(r=a.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(s=a.variants[`${t.variant}Hover`])==null?void 0:s[t.color]}},{"&:active":(o=a.variants[`${t.variant}Active`])==null?void 0:o[t.color]},{[`&.${we.disabled}`]:(n=a.variants[`${t.variant}Disabled`])==null?void 0:n[t.color]}]:[]]}),Da=M("input",{name:"JoyRadio",slot:"Input",overridesResolver:(a,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",height:"100%",width:"100%",cursor:"pointer"})),$a=M("label",{name:"JoyRadio",slot:"Label",overridesResolver:(a,t)=>t.label})(({ownerState:a})=>j({flex:1,minWidth:0},a.disableIcon&&{zIndex:1,pointerEvents:"none"})),_a=M("span",{name:"JoyRadio",slot:"Icon",overridesResolver:(a,t)=>t.icon})(({ownerState:a})=>({width:"calc(var(--Radio-size) / 2)",height:"calc(var(--Radio-size) / 2)",borderRadius:"inherit",color:"inherit",backgroundColor:"currentColor",transform:a.checked?"scale(1)":"scale(0)"})),Ba=p.forwardRef(function(t,r){var s,o,n,i,c,l,m;const d=Fe({props:t,name:"JoyRadio"}),{checked:g,checkedIcon:v,defaultChecked:x,disabled:f,disableIcon:S=!1,overlay:y=!1,label:b,id:R,name:V,onBlur:C,onChange:h,onFocus:U,onFocusVisible:z,readOnly:u,required:P,color:_,variant:W="outlined",size:J="md",uncheckedIcon:H,value:B,component:F,slots:O={},slotProps:ge={}}=d,re=Ne(d,za),I=p.useContext(Ie),le=gt(R??(I==null?void 0:I.htmlFor)),D=p.useContext(ft),Z=I!=null&&I.error?"danger":(s=(o=(n=t.color)!=null?n:I==null?void 0:I.color)!=null?o:_)!=null?s:"primary",Q=I!=null&&I.error?"danger":(i=(c=(l=t.color)!=null?l:I==null?void 0:I.color)!=null?c:_)!=null?i:"neutral",oe=t.size||(I==null?void 0:I.size)||(D==null?void 0:D.size)||J,fe=t.name||(D==null?void 0:D.name)||V,ee=t.disableIcon||(D==null?void 0:D.disableIcon)||S,ve=t.overlay||(D==null?void 0:D.overlay)||y,ye={checked:typeof g>"u"&&B!=null?Ua(D==null?void 0:D.value,B):g,defaultChecked:x,disabled:t.disabled||(I==null?void 0:I.disabled)||f,onBlur:C,onChange:h,onFocus:U,onFocusVisible:z},{getInputProps:be,checked:ce,disabled:St,focusVisible:kt}=yt(ye),Ct=(m=t.color)!=null?m:ce?Z:Q,ne=j({},d,{checked:ce,disabled:St,focusVisible:kt,color:Ct,variant:W,size:oe,disableIcon:ee,overlay:ve,orientation:D==null?void 0:D.orientation}),de=Ta(ne),me=j({},re,{component:F,slots:O,slotProps:ge}),[zt,Tt]=A("root",{ref:r,className:de.root,elementType:Ra,externalForwardedProps:me,ownerState:ne}),[Ut,Rt]=A("radio",{className:de.radio,elementType:Pa,externalForwardedProps:me,ownerState:ne}),[Pt,It]=A("icon",{className:de.icon,elementType:_a,externalForwardedProps:me,ownerState:ne}),[Dt,$t]=A("action",{className:de.action,elementType:Ia,externalForwardedProps:me,ownerState:ne}),[_t,Bt]=A("input",{additionalProps:{type:"radio",id:le,name:fe,readOnly:u,required:P??(I==null?void 0:I.required),value:String(B),"aria-describedby":I==null?void 0:I["aria-describedby"]},className:de.input,elementType:Da,externalForwardedProps:me,getSlotProps:()=>be({onChange:D==null?void 0:D.onChange}),ownerState:ne}),[Ft,Lt]=A("label",{additionalProps:{htmlFor:le},className:de.label,elementType:$a,externalForwardedProps:me,ownerState:ne});return e.jsxs(zt,j({},Tt,{children:[e.jsxs(Ut,j({},Rt,{children:[ce&&!ee&&v,!ce&&!ee&&H,!v&&!H&&!ee&&e.jsx(Pt,j({},It)),e.jsx(Dt,j({},$t,{children:e.jsx(_t,j({},Bt))}))]})),b&&e.jsx(Ft,j({},Lt,{children:e.jsx(xa.Provider,{value:!0,children:b})}))]}))}),pe=Ba;function Fa(a){return Be("MuiRadioGroup",a)}_e("MuiRadioGroup",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const La=["className","component","children","name","defaultValue","disableIcon","overlay","value","onChange","color","variant","size","orientation","role","slots","slotProps"],Wa=a=>{const{orientation:t,size:r,variant:s,color:o}=a,n={root:["root",t,s&&`variant${q(s)}`,o&&`color${q(o)}`,r&&`size${q(r)}`]};return Le(n,Fa,{})},Aa=M("div",{name:"JoyRadioGroup",slot:"Root",overridesResolver:(a,t)=>t.root})(({ownerState:a,theme:t})=>{var r;return j({},a.size==="sm"&&{"--RadioGroup-gap":"0.625rem"},a.size==="md"&&{"--RadioGroup-gap":"0.875rem"},a.size==="lg"&&{"--RadioGroup-gap":"1.25rem"},{display:"flex",margin:"var(--unstable_RadioGroup-margin)",flexDirection:a.orientation==="horizontal"?"row":"column",borderRadius:t.vars.radius.sm},(r=t.variants[a.variant])==null?void 0:r[a.color])}),Ma=p.forwardRef(function(t,r){const s=Fe({props:t,name:"JoyRadioGroup"}),{className:o,component:n,children:i,name:c,defaultValue:l,disableIcon:m=!1,overlay:d,value:g,onChange:v,color:x="neutral",variant:f="plain",size:S="md",orientation:y="vertical",role:b="radiogroup",slots:R={},slotProps:V={}}=s,C=Ne(s,La),[h,U]=ha({controlled:g,default:l,name:"RadioGroup"}),z=p.useContext(Ie),u=t.size||(z==null?void 0:z.size)||S,P=j({orientation:y,size:u,variant:f,color:x,role:b},s),_=Wa(P),W=gt(c),J=p.useMemo(()=>({disableIcon:m,overlay:d,orientation:y,size:u,name:W,value:h,onChange:F=>{U(F.target.value),v&&v(F)}}),[m,W,v,d,y,U,u,h]),[H,B]=A("root",{ref:r,className:ua(_.root,o),elementType:Aa,externalForwardedProps:j({},C,{component:n,slots:R,slotProps:V}),ownerState:P,additionalProps:{as:n,role:b,id:z==null?void 0:z.htmlFor,"aria-labelledby":z==null?void 0:z.labelId,"aria-describedby":z==null?void 0:z["aria-describedby"]}});return e.jsx(ft.Provider,{value:J,children:e.jsx(H,j({},B,{children:e.jsx(Ie.Provider,{value:void 0,children:p.Children.map(i,(F,O)=>p.isValidElement(F)?p.cloneElement(F,j({},O===0&&{"data-first-child":""},O===p.Children.count(i)-1&&{"data-last-child":""},{"data-parent":"RadioGroup"})):F)})}))})}),Ye=Ma,Ha=["checked","defaultChecked","disabled","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","id","color","variant","size","startDecorator","endDecorator","component","slots","slotProps"],Oa=a=>{const{checked:t,disabled:r,focusVisible:s,readOnly:o,color:n,variant:i,size:c}=a,l={root:["root",t&&"checked",r&&"disabled",s&&"focusVisible",o&&"readOnly",i&&`variant${q(i)}`,n&&`color${q(n)}`,c&&`size${q(c)}`],thumb:["thumb",t&&"checked"],track:["track",t&&"checked"],action:["action",s&&"focusVisible"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Le(l,Na,{})},Ea=({theme:a,ownerState:t})=>(r={})=>{var s,o,n;const i=((s=a.variants[`${t.variant}${r.state||""}`])==null?void 0:s[t.color])||{};return{"--Switch-trackBackground":(o=i.backgroundColor)!=null?o:a.vars.palette.background.surface,"--Switch-trackColor":i.color,"--Switch-trackBorderColor":t.variant==="outlined"?i.borderColor:"currentColor","--Switch-thumbBackground":i.color,"--Switch-thumbColor":(n=i.backgroundColor)!=null?n:a.vars.palette.background.surface}},Va=M("div",{name:"JoySwitch",slot:"Root",overridesResolver:(a,t)=>t.root})(({theme:a,ownerState:t})=>{var r;const s=Ea({theme:a,ownerState:t});return j({"--Icon-color":"currentColor","--variant-borderWidth":(r=a.variants[t.variant])==null||(r=r[t.color])==null?void 0:r["--variant-borderWidth"],"--Switch-trackRadius":a.vars.radius.xl,"--Switch-thumbShadow":t.variant==="soft"?"none":"0 0 0 1px var(--Switch-trackBackground)"},t.size==="sm"&&{"--Switch-trackWidth":"26px","--Switch-trackHeight":"16px","--Switch-thumbSize":"10px",fontSize:a.vars.fontSize.sm,gap:"var(--Switch-gap, 6px)"},t.size==="md"&&{"--Switch-trackWidth":"32px","--Switch-trackHeight":"20px","--Switch-thumbSize":"14px",fontSize:a.vars.fontSize.md,gap:"var(--Switch-gap, 8px)"},t.size==="lg"&&{"--Switch-trackWidth":"40px","--Switch-trackHeight":"24px","--Switch-thumbSize":"18px",gap:"var(--Switch-gap, 12px)"},{"--unstable_paddingBlock":"max((var(--Switch-trackHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Switch-thumbSize)) / 2, 0px)","--Switch-thumbRadius":"max(var(--Switch-trackRadius) - var(--unstable_paddingBlock), min(var(--unstable_paddingBlock) / 2, var(--Switch-trackRadius) / 2))","--Switch-thumbWidth":"var(--Switch-thumbSize)","--Switch-thumbOffset":"max((var(--Switch-trackHeight) - var(--Switch-thumbSize)) / 2, 0px)"},s(),{"&:hover":{"@media (hover: hover)":j({},s({state:"Hover"}))},[`&.${Ve.checked}`]:j({},s(),{"&:hover":{"@media (hover: hover)":j({},s({state:"Hover"}))}}),[`&.${Ve.disabled}`]:j({pointerEvents:"none",color:a.vars.palette.text.tertiary},s({state:"Disabled"})),display:"inline-flex",alignItems:"center",alignSelf:"center",fontFamily:a.vars.fontFamily.body,position:"relative",padding:"calc((var(--Switch-thumbSize) / 2) - (var(--Switch-trackHeight) / 2)) calc(-1 * var(--Switch-thumbOffset))",backgroundColor:"initial",border:"none",margin:"var(--unstable_Switch-margin)"})}),Ja=M("div",{name:"JoySwitch",slot:"Action",overridesResolver:(a,t)=>t.action})(({theme:a})=>({borderRadius:"var(--Switch-trackRadius)",position:"absolute",top:0,left:0,bottom:0,right:0,[a.focus.selector]:a.focus.default})),Ga=M("input",{name:"JoySwitch",slot:"Input",overridesResolver:(a,t)=>t.input})({margin:0,height:"100%",width:"100%",opacity:0,position:"absolute",cursor:"pointer"}),qa=M("span",{name:"JoySwitch",slot:"Track",overridesResolver:(a,t)=>t.track})(({theme:a,ownerState:t})=>j({position:"relative",color:"var(--Switch-trackColor)",height:"var(--Switch-trackHeight)",width:"var(--Switch-trackWidth)",display:"flex",flexShrink:0,justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",border:"var(--variant-borderWidth, 0px) solid",borderColor:"var(--Switch-trackBorderColor)",backgroundColor:"var(--Switch-trackBackground)",borderRadius:"var(--Switch-trackRadius)",fontFamily:a.vars.fontFamily.body},t.size==="sm"&&{fontSize:a.vars.fontSize.xs},t.size==="md"&&{fontSize:a.vars.fontSize.sm},t.size==="lg"&&{fontSize:a.vars.fontSize.md})),Xa=M("span",{name:"JoySwitch",slot:"Thumb",overridesResolver:(a,t)=>t.thumb})({"--Icon-fontSize":"calc(var(--Switch-thumbSize) * 0.75)",display:"inline-flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%",left:"calc(50% - var(--Switch-trackWidth) / 2 + var(--Switch-thumbWidth) / 2 + var(--Switch-thumbOffset))",transform:"translate(-50%, -50%)",width:"var(--Switch-thumbWidth)",height:"var(--Switch-thumbSize)",borderRadius:"var(--Switch-thumbRadius)",boxShadow:"var(--Switch-thumbShadow)",color:"var(--Switch-thumbColor)",backgroundColor:"var(--Switch-thumbBackground)",[`&.${Ve.checked}`]:{left:"calc(50% + var(--Switch-trackWidth) / 2 - var(--Switch-thumbWidth) / 2 - var(--Switch-thumbOffset))"}}),Ka=M("span",{name:"JoySwitch",slot:"StartDecorator",overridesResolver:(a,t)=>t.startDecorator})({display:"inline-flex"}),Ya=M("span",{name:"JoySwitch",slot:"EndDecorator",overridesResolver:(a,t)=>t.endDecorator})({display:"inline-flex"}),Za=p.forwardRef(function(t,r){var s,o,n,i,c,l;const m=Fe({props:t,name:"JoySwitch"}),{disabled:d,id:g,color:v,variant:x="solid",size:f="md",startDecorator:S,endDecorator:y,component:b,slots:R={},slotProps:V={}}=m,C=Ne(m,Ha),h=p.useContext(Ie),U=(s=(o=t.size)!=null?o:h==null?void 0:h.size)!=null?s:f,z=(n=t.color)!=null?n:h!=null&&h.error?"danger":(i=h==null?void 0:h.color)!=null?i:v,u=j({disabled:(c=(l=t.disabled)!=null?l:h==null?void 0:h.disabled)!=null?c:d},m),{getInputProps:P,checked:_,disabled:W,focusVisible:J,readOnly:H}=yt(u),B=j({},m,{id:g,checked:_,disabled:W,focusVisible:J,readOnly:H,color:_?z||"primary":z||"neutral",variant:x,size:U}),F=Oa(B),O=j({},C,{component:b,slots:R,slotProps:V}),[ge,re]=A("root",{ref:r,className:F.root,elementType:Va,externalForwardedProps:O,ownerState:B}),[I,le]=A("startDecorator",{additionalProps:{"aria-hidden":!0},className:F.startDecorator,elementType:Ka,externalForwardedProps:O,ownerState:B}),[D,Z]=A("endDecorator",{additionalProps:{"aria-hidden":!0},className:F.endDecorator,elementType:Ya,externalForwardedProps:O,ownerState:B}),[Q,oe]=A("track",{className:F.track,elementType:qa,externalForwardedProps:O,ownerState:B}),[fe,ee]=A("thumb",{className:F.thumb,elementType:Xa,externalForwardedProps:O,ownerState:B}),[ve,Ce]=A("action",{className:F.action,elementType:Ja,externalForwardedProps:O,ownerState:B}),[ye,be]=A("input",{additionalProps:{id:g??(h==null?void 0:h.htmlFor),"aria-describedby":h==null?void 0:h["aria-describedby"]},className:F.input,elementType:Ga,externalForwardedProps:O,getSlotProps:P,ownerState:B});return e.jsxs(ge,j({},re,{children:[S&&e.jsx(I,j({},le,{children:typeof S=="function"?S(B):S})),e.jsxs(Q,j({},oe,{children:[oe==null?void 0:oe.children,e.jsx(fe,j({},ee))]})),e.jsx(ve,j({},Ce,{children:e.jsx(ye,j({},be))})),y&&e.jsx(D,j({},Z,{children:typeof y=="function"?y(B):y}))]}))}),Re=Za;function Qa(a){return Be("MuiTextarea",a)}const es=_e("MuiTextarea",["root","textarea","startDecorator","endDecorator","formControl","disabled","error","focused","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft"]),wt=es,ts=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","size","color","variant","startDecorator","endDecorator","minRows","maxRows","component","slots","slotProps"],as=a=>{const{disabled:t,variant:r,color:s,size:o}=a,n={root:["root",t&&"disabled",r&&`variant${q(r)}`,s&&`color${q(s)}`,o&&`size${q(o)}`],textarea:["textarea"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Le(n,Qa,{})},ss=M("div",{name:"JoyTextarea",slot:"Root",overridesResolver:(a,t)=>t.root})(({theme:a,ownerState:t})=>{var r,s,o,n,i,c;const l=(r=a.variants[`${t.variant}`])==null?void 0:r[t.color];return[j({"--Textarea-radius":a.vars.radius.sm,"--Textarea-gap":"0.5rem","--Textarea-placeholderColor":"inherit","--Textarea-placeholderOpacity":.64,"--Textarea-decoratorColor":a.vars.palette.text.icon,"--Textarea-focused":"0","--Textarea-focusedThickness":a.vars.focus.thickness,"--Textarea-focusedHighlight":(s=a.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:s[500],'&:not([data-inverted-colors="false"])':j({},t.instanceColor&&{"--_Textarea-focusedHighlight":(o=a.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:o[500]},{"--Textarea-focusedHighlight":`var(--_Textarea-focusedHighlight, ${a.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Textarea-minHeight":"2rem","--Textarea-paddingBlock":"calc(0.375rem - 0.5px - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.5rem","--Textarea-decoratorChildHeight":"min(1.5rem, var(--Textarea-minHeight))","--Icon-fontSize":a.vars.fontSize.xl},t.size==="md"&&{"--Textarea-minHeight":"2.25rem","--Textarea-paddingBlock":"calc(0.375rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"0.75rem","--Textarea-decoratorChildHeight":"min(1.75rem, var(--Textarea-minHeight))","--Icon-fontSize":a.vars.fontSize.xl2},t.size==="lg"&&{"--Textarea-minHeight":"3rem","--Textarea-paddingBlock":"calc(0.75rem - var(--variant-borderWidth, 0px))","--Textarea-paddingInline":"1rem","--Textarea-gap":"0.75rem","--Textarea-decoratorChildHeight":"min(2.375rem, var(--Textarea-minHeight))","--Icon-fontSize":a.vars.fontSize.xl2},{"--_Textarea-paddingBlock":"max((var(--Textarea-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Textarea-decoratorChildHeight)) / 2, 0px)","--Textarea-decoratorChildRadius":"max(var(--Textarea-radius) - var(--variant-borderWidth, 0px) - var(--_Textarea-paddingBlock), min(var(--_Textarea-paddingBlock) + var(--variant-borderWidth, 0px), var(--Textarea-radius) / 2))","--Button-minHeight":"var(--Textarea-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Textarea-decoratorChildHeight)","--Button-radius":"var(--Textarea-decoratorChildRadius)","--IconButton-radius":"var(--Textarea-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:a.shadow.xs},{minWidth:0,minHeight:"var(--Textarea-minHeight)",cursor:"text",position:"relative",display:"flex",flexDirection:"column",paddingInlineStart:"var(--Textarea-paddingInline)",paddingBlock:"var(--Textarea-paddingBlock)",borderRadius:"var(--Textarea-radius)"},a.typography[`body-${t.size}`],l,{backgroundColor:(n=l==null?void 0:l.backgroundColor)!=null?n:a.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Textarea-focusedInset, inset) 0 0 0 calc(var(--Textarea-focused) * var(--Textarea-focusedThickness)) var(--Textarea-focusedHighlight)"}}),{"&:hover":j({},(i=a.variants[`${t.variant}Hover`])==null?void 0:i[t.color],{backgroundColor:null,cursor:"text"}),[`&.${wt.disabled}`]:(c=a.variants[`${t.variant}Disabled`])==null?void 0:c[t.color],"&:focus-within::before":{"--Textarea-focused":"1"}}]}),rs=M(wa,{name:"JoyTextarea",slot:"Textarea",overridesResolver:(a,t)=>t.textarea})({resize:"none",border:"none",minWidth:0,outline:0,padding:0,paddingInlineEnd:"var(--Textarea-paddingInline)",flex:"auto",alignSelf:"stretch",color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit","&::-webkit-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Textarea-placeholderColor)",opacity:"var(--Textarea-placeholderOpacity)"}}),os=M("div",{name:"JoyTextarea",slot:"StartDecorator",overridesResolver:(a,t)=>t.startDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockEnd:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),ns=M("div",{name:"JoyTextarea",slot:"EndDecorator",overridesResolver:(a,t)=>t.endDecorator})({display:"flex",marginInlineStart:"calc(var(--Textarea-paddingBlock) - var(--Textarea-paddingInline))",marginInlineEnd:"var(--Textarea-paddingBlock)",marginBlockStart:"var(--Textarea-gap)",color:"var(--Textarea-decoratorColor)",cursor:"initial"}),is=p.forwardRef(function(t,r){var s,o,n,i,c,l,m,d;const g=Fe({props:t,name:"JoyTextarea"}),v=da(g,wt),{propsToForward:x,rootStateClasses:f,inputStateClasses:S,getRootProps:y,getInputProps:b,formControl:R,focused:V,error:C=!1,disabled:h=!1,size:U="md",color:z="neutral",variant:u="outlined",startDecorator:P,endDecorator:_,minRows:W,maxRows:J,component:H,slots:B={},slotProps:F={}}=v,O=Ne(v,ts),ge=(s=(o=t.disabled)!=null?o:R==null?void 0:R.disabled)!=null?s:h,re=(n=(i=t.error)!=null?i:R==null?void 0:R.error)!=null?n:C,I=(c=(l=t.size)!=null?l:R==null?void 0:R.size)!=null?c:U,le=(m=t.color)!=null?m:re?"danger":(d=R==null?void 0:R.color)!=null?d:z,D=j({instanceColor:re?"danger":t.color},g,{color:le,disabled:ge,error:re,focused:V,size:I,variant:u}),Z=as(D),Q=j({},O,{component:H,slots:B,slotProps:F}),[oe,fe]=A("root",{ref:r,className:[Z.root,f],elementType:ss,externalForwardedProps:Q,getSlotProps:y,ownerState:D}),[ee,ve]=A("textarea",{additionalProps:{id:R==null?void 0:R.htmlFor,"aria-describedby":R==null?void 0:R["aria-describedby"]},className:[Z.textarea,S],elementType:rs,internalForwardedProps:j({},x,{minRows:W,maxRows:J}),externalForwardedProps:Q,getSlotProps:b,ownerState:D}),[Ce,ye]=A("startDecorator",{className:Z.startDecorator,elementType:os,externalForwardedProps:Q,ownerState:D}),[be,ce]=A("endDecorator",{className:Z.endDecorator,elementType:ns,externalForwardedProps:Q,ownerState:D});return e.jsxs(oe,j({},fe,{children:[P&&e.jsx(Ce,j({},ye,{children:P})),e.jsx(ee,j({},ve)),_&&e.jsx(be,j({},ce,{children:_}))]}))}),Je=is;function ls(a,t,r){switch(r.length){case 0:return a.call(t);case 1:return a.call(t,r[0]);case 2:return a.call(t,r[0],r[1]);case 3:return a.call(t,r[0],r[1],r[2])}return a.apply(t,r)}var cs=800,ds=16,ms=Date.now;function us(a){var t=0,r=0;return function(){var s=ms(),o=ds-(s-r);if(r=s,o>0){if(++t>=cs)return arguments[0]}else t=0;return a.apply(void 0,arguments)}}function hs(a){return function(){return a}}var rt=function(){try{var a=At(Object,"defineProperty");return a({},"",{}),a}catch{}}(),xs=rt?function(a,t){return rt(a,"toString",{configurable:!0,enumerable:!1,value:hs(t),writable:!0})}:Ge;const ps=xs;var gs=us(ps),ot=Math.max;function fs(a,t,r){return t=ot(t===void 0?a.length-1:t,0),function(){for(var s=arguments,o=-1,n=ot(s.length-t,0),i=Array(n);++o<n;)i[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=r(i),ls(a,this,c)}}function vs(a,t){return gs(fs(a,t,Ge),a+"")}var nt=Ze?Ze.isConcatSpreadable:void 0;function ys(a){return mt(a)||Mt(a)||!!(nt&&a&&a[nt])}function Nt(a,t,r,s,o){var n=-1,i=a.length;for(r||(r=ys),o||(o=[]);++n<i;){var c=a[n];t>0&&r(c)?t>1?Nt(c,t-1,r,s,o):Ht(o,c):s||(o[o.length]=c)}return o}function bs(a){return function(t,r,s){for(var o=-1,n=Object(t),i=s(t),c=i.length;c--;){var l=i[a?c:++o];if(r(n[l],l,n)===!1)break}return t}}var js=bs();const ws=js;function Ns(a,t){return a&&ws(a,t,Ot)}function Ss(a,t){return function(r,s){if(r==null)return r;if(!ut(r))return a(r,s);for(var o=r.length,n=t?o:-1,i=Object(r);(t?n--:++n<o)&&s(i[n],n,i)!==!1;);return r}}var ks=Ss(Ns);function Cs(a,t){var r=-1,s=ut(a)?Array(a.length):[];return ks(a,function(o,n,i){s[++r]=t(o,n,i)}),s}function Pe(a,t){return Et(a,t)}function zs(a,t){var r=a.length;for(a.sort(t);r--;)a[r]=a[r].value;return a}function Ts(a,t){if(a!==t){var r=a!==void 0,s=a===null,o=a===a,n=Qe(a),i=t!==void 0,c=t===null,l=t===t,m=Qe(t);if(!c&&!m&&!n&&a>t||n&&i&&l&&!c&&!m||s&&i&&l||!r&&l||!o)return 1;if(!s&&!n&&!m&&a<t||m&&r&&o&&!s&&!n||c&&r&&o||!i&&o||!l)return-1}return 0}function Us(a,t,r){for(var s=-1,o=a.criteria,n=t.criteria,i=o.length,c=r.length;++s<i;){var l=Ts(o[s],n[s]);if(l){if(s>=c)return l;var m=r[s];return l*(m=="desc"?-1:1)}}return a.index-t.index}function Rs(a,t,r){t.length?t=We(t,function(n){return mt(n)?function(i){return Vt(i,n.length===1?n[0]:n)}:n}):t=[Ge];var s=-1;t=We(t,Jt(Gt));var o=Cs(a,function(n,i,c){var l=We(t,function(m){return m(n)});return{criteria:l,index:++s,value:n}});return zs(o,function(n,i){return Us(n,i,r)})}var Ps=vs(function(a,t){if(a==null)return[];var r=t.length;return r>1&&tt(a,t[0],t[1])?t=[]:r>2&&tt(t[0],t[1],t[2])&&(t=[t[0]]),Rs(a,Nt(t,1),[])});const Is=a=>{const{user:t,destroy:r}=a,s=L(),o=Se(),[n,i]=p.useState(""),[c,l]=p.useState("");p.useEffect(()=>{},[]);const m=()=>{r()},d=x=>{const f=x.target.value;i(f)},g=x=>{const f=x.target.value;l(f)},v=async()=>{if(n===""||c===""){w.error(s("message.fill-all"));return}if(n!==c){w.error(s("message.new-password-not-match")),l("");return}try{await o.updateUser({name:t.name,password:n},["password"]),w(s("message.password-changed")),m()}catch(x){console.error(x),w.error(x.response.data.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsxs("p",{className:"title-text",children:[s("setting.account-section.change-password")," (",t.nickname,")"]}),e.jsx(E,{size:"sm",onClick:m,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container",children:[e.jsx("p",{className:"text-sm mb-1",children:s("auth.new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:s("auth.new-password"),value:n,onChange:d}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:s("auth.repeat-new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:s("auth.repeat-new-password"),value:c,onChange:g}),e.jsxs("div",{className:"flex flex-row justify-end items-center mt-4 w-full gap-x-2",children:[e.jsx(k,{color:"neutral",variant:"plain",onClick:m,children:s("common.cancel")}),e.jsx(k,{color:"primary",onClick:v,children:s("common.save")})]})]})]})};function Ds(a){K({className:"change-member-password-dialog",dialogName:"change-member-password-dialog"},Is,{user:a})}const $s=()=>{const a=L(),t=se(),r=Se(),[s,o]=p.useState({creatingUser:He.fromPartial({username:"",password:"",role:he.USER})}),[n,i]=p.useState([]),c=Ps(n,"id");p.useEffect(()=>{l()},[]);const l=async()=>{const b=await r.fetchUsers();i(b)},m=b=>{o({...s,creatingUser:{...s.creatingUser,username:b.target.value}})},d=b=>{o({...s,creatingUser:{...s.creatingUser,password:b.target.value}})},g=b=>{o({...s,creatingUser:{...s.creatingUser,role:Number(b.target.value)}})},v=async()=>{if(s.creatingUser.username===""||s.creatingUser.password===""){w.error(a("message.fill-form"));return}try{await xe.createUser({user:{name:`${Oe}${s.creatingUser.username}`,password:s.creatingUser.password,role:s.creatingUser.role}})}catch(b){w.error(b.details)}await l(),o({...s,creatingUser:He.fromPartial({username:"",password:"",role:he.USER})})},x=b=>{Ds(b)},f=b=>{ie({title:a("setting.member-section.archive-member"),content:a("setting.member-section.archive-warning",{username:b.nickname}),style:"danger",dialogName:"archive-user-dialog",onConfirm:async()=>{await xe.updateUser({user:{name:b.name,rowStatus:ze.ARCHIVED},updateMask:["row_status"]}),l()}})},S=async b=>{await xe.updateUser({user:{name:b.name,rowStatus:ze.ACTIVE},updateMask:["row_status"]}),l()},y=b=>{ie({title:a("setting.member-section.delete-member"),content:a("setting.member-section.delete-warning",{username:b.nickname}),style:"danger",dialogName:"delete-user-dialog",onConfirm:async()=>{await r.deleteUser(b.name),l()}})};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("setting.member-section.create-a-member")}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start gap-2",children:[e.jsxs("div",{className:"flex flex-col justify-start items-start gap-1",children:[e.jsx("span",{className:"text-sm",children:a("common.username")}),e.jsx(N,{type:"text",placeholder:a("common.username"),value:s.creatingUser.username,onChange:m})]}),e.jsxs("div",{className:"flex flex-col justify-start items-start gap-1",children:[e.jsx("span",{className:"text-sm",children:a("common.password")}),e.jsx(N,{type:"password",placeholder:a("common.password"),value:s.creatingUser.password,onChange:d})]}),e.jsxs("div",{className:"flex flex-col justify-start items-start gap-1",children:[e.jsx("span",{className:"text-sm",children:a("common.role")}),e.jsxs(Ye,{size:"sm",orientation:"horizontal",defaultValue:he.USER,onChange:g,children:[e.jsx(pe,{value:he.USER,label:"User"}),e.jsx(pe,{value:he.ADMIN,label:"Admin"})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(k,{onClick:v,children:a("common.create")})})]}),e.jsx("div",{className:"w-full flex flex-row justify-between items-center mt-6",children:e.jsx("div",{className:"title-text",children:a("setting.member-list")})}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full align-middle border rounded-lg dark:border-zinc-600",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-zinc-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-sm font-semibold text-left text-gray-900 dark:text-gray-400",children:[e.jsx("th",{scope:"col",className:"px-3 py-2",children:"ID"}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.role")}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.username")}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.nickname")}),e.jsx("th",{scope:"col",className:"px-3 py-2",children:a("common.email")}),e.jsx("th",{scope:"col",className:"relative py-2 pl-3 pr-4"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-zinc-600",children:c.map(b=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",children:b.id}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:qt(b.role)}),e.jsxs("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:[b.username,e.jsx("span",{className:"ml-1 italic",children:b.rowStatus===ze.ARCHIVED&&"(Archived)"})]}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:b.nickname}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:b.email}),e.jsx("td",{className:"relative whitespace-nowrap py-2 pl-3 pr-4 text-right text-sm font-medium flex justify-end",children:(t==null?void 0:t.id)===b.id?e.jsx("span",{children:a("common.yourself")}):e.jsxs(qe,{children:[e.jsx(Xe,{size:"sm",children:e.jsx(T.MoreVertical,{className:"w-4 h-auto"})}),e.jsxs(Ke,{placement:"bottom-end",size:"sm",children:[e.jsx(te,{onClick:()=>x(b),children:a("setting.account-section.change-password")}),b.rowStatus===ze.ACTIVE?e.jsx(te,{onClick:()=>f(b),children:a("setting.member-section.archive-member")}):e.jsxs(e.Fragment,{children:[e.jsx(te,{onClick:()=>S(b),children:a("common.restore")}),e.jsx(te,{onClick:()=>y(b),children:a("setting.member-section.delete-member")})]})]})]})})]},b.id))})]})})})]})},_s=({destroy:a})=>{const t=L(),r=se(),s=Se(),n=Y().state.systemStatus.profile,[i,c]=p.useState(""),[l,m]=p.useState("");p.useEffect(()=>{n.mode==="demo"&&(w.error("Demo mode does not support this operation."),a())},[]);const d=()=>{a()},g=f=>{c(f.target.value)},v=f=>{m(f.target.value)},x=async()=>{if(i===""||l===""){w.error(t("message.fill-all"));return}if(i!==l){w.error(t("message.new-password-not-match")),m("");return}try{await s.updateUser({name:r.name,password:i},["password"]),w.success(t("message.password-changed")),d()}catch(f){console.error(f),w.error(f.response.data.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsx("p",{className:"title-text",children:t("setting.account-section.change-password")}),e.jsx(E,{size:"sm",onClick:d,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container",children:[e.jsx("p",{className:"text-sm mb-1",children:t("auth.new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:t("auth.new-password"),value:i,onChange:g}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("auth.repeat-new-password")}),e.jsx(N,{className:"w-full",type:"password",placeholder:t("auth.repeat-new-password"),value:l,onChange:v}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center pt-4 space-x-2",children:[e.jsx(k,{color:"neutral",variant:"plain",onClick:d,children:t("common.cancel")}),e.jsx(k,{color:"primary",onClick:x,children:t("common.save")})]})]})]})};function Bs(){K({className:"change-password-dialog",dialogName:"change-password-dialog"},_s)}const Fs=({destroy:a})=>{const t=L(),r=se(),s=Se(),[o,n]=p.useState({avatarUrl:r.avatarUrl,username:r.name.replace(Oe,""),nickname:r.nickname,email:r.email}),i=()=>{a()},c=x=>{n(f=>({...f,...x}))},l=async x=>{const f=x.target.files;if(f&&f.length>0){const S=f[0];if(S.size>2*1024*1024){w.error("Max file size is 2MB");return}try{const y=await Xt(S);c({avatarUrl:y})}catch(y){console.error(y),w.error("Failed to convert image to base64")}}},m=x=>{c({nickname:x.target.value})},d=x=>{c({username:x.target.value})},g=x=>{n(f=>({...f,email:x.target.value}))},v=async()=>{if(o.username===""){w.error(t("message.fill-all"));return}try{const x=[];Pe(r.name.replace(Oe,""),o.username)||x.push("username"),Pe(r.nickname,o.nickname)||x.push("nickname"),Pe(r.email,o.email)||x.push("email"),Pe(r.avatarUrl,o.avatarUrl)||x.push("avatar_url"),await s.updateUser(He.fromPartial({name:r.name,username:o.username,nickname:o.nickname,email:o.email,avatarUrl:o.avatarUrl}),x),w.success(t("message.update-succeed")),i()}catch(x){console.error(x),w.error(x.details)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsx("p",{className:"title-text",children:t("setting.account-section.update-information")}),e.jsx(E,{size:"sm",onClick:i,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container space-y-2",children:[e.jsxs("div",{className:"w-full flex flex-row justify-start items-center",children:[e.jsx("span",{className:"text-sm mr-2",children:t("common.avatar")}),e.jsxs("label",{className:"relative cursor-pointer hover:opacity-80",children:[e.jsx(ht,{className:"!w-10 !h-10",avatarUrl:o.avatarUrl}),e.jsx("input",{type:"file",accept:"image/*",className:"absolute invisible w-full h-full inset-0",onChange:l})]}),o.avatarUrl&&e.jsx(T.X,{className:"w-4 h-auto ml-1 cursor-pointer opacity-60 hover:opacity-80",onClick:()=>c({avatarUrl:""})})]}),e.jsxs("p",{className:"text-sm",children:[t("common.username"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.account-section.username-note"),")"]})]}),e.jsx(N,{className:"w-full",value:o.username,onChange:d}),e.jsxs("p",{className:"text-sm",children:[t("common.nickname"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.account-section.nickname-note"),")"]})]}),e.jsx(N,{className:"w-full",value:o.nickname,onChange:m}),e.jsxs("p",{className:"text-sm",children:[t("common.email"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.account-section.email-note"),")"]})]}),e.jsx(N,{className:"w-full",type:"email",value:o.email,onChange:g}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center pt-4 space-x-2",children:[e.jsx(k,{color:"neutral",variant:"plain",onClick:i,children:t("common.cancel")}),e.jsx(k,{color:"primary",onClick:v,children:t("common.save")})]})]})]})};function Ls(){K({className:"update-account-dialog",dialogName:"update-account-dialog"},Fs)}const Ws=[{label:"8 hours",value:3600*8},{label:"1 month",value:3600*24*30},{label:"Never",value:0}],As=a=>{const{destroy:t,onConfirm:r}=a,s=L(),o=se(),[n,i]=p.useState({description:"",expiration:3600*8}),c=pt(!1),l=v=>{i({...n,...v})},m=v=>{l({description:v.target.value})},d=v=>{l({expiration:Number(v.target.value)})},g=async()=>{if(!n.description){w.error("Description is required");return}try{await xe.createUserAccessToken({name:o.name,description:n.description,expiresAt:n.expiration?new Date(Date.now()+n.expiration*1e3):void 0}),r(),t()}catch(v){console.error(v),w.error(v.response.data.message)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:"Create access token"}),e.jsx(E,{size:"sm",onClick:()=>t(),children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container !w-80",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Description ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx(N,{className:"w-full",type:"text",placeholder:"Some description",value:n.description,onChange:m})})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Expiration ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"w-full flex flex-row justify-start items-center text-base",children:e.jsx(Ye,{orientation:"horizontal",value:n.expiration,onChange:d,children:Ws.map(v=>e.jsx(pe,{value:v.value,checked:n.expiration===v.value,label:v.label},v.value))})})]}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center mt-4 space-x-2",children:[e.jsx(k,{color:"neutral",variant:"plain",disabled:c.isLoading,loading:c.isLoading,onClick:t,children:s("common.cancel")}),e.jsx(k,{color:"primary",disabled:c.isLoading,loading:c.isLoading,onClick:g,children:s("common.create")})]})]})]})};function Ms(a){K({className:"create-access-token-dialog",dialogName:"create-access-token-dialog"},As,{onConfirm:a})}const ke=a=>{const{className:t,url:r,title:s}=a,o=L();return e.jsx(e.Fragment,{children:e.jsx(xt,{title:s??o("common.learn-more"),placement:"top",children:e.jsx("a",{className:`text-gray-500 dark:text-gray-400 hover:text-blue-600 ${t}`,href:r,target:"_blank",children:e.jsx(T.ExternalLink,{className:"w-4 h-auto"})})})})},it=async a=>{const{accessTokens:t}=await xe.listUserAccessTokens({name:a});return t},Hs=()=>{const a=L(),t=se(),[r,s]=p.useState([]);p.useEffect(()=>{it(t.name).then(l=>{s(l)})},[]);const o=async()=>{const l=await it(t.name);s(l)},n=l=>{ca(l),w.success("Access token copied to clipboard")},i=async l=>{ie({title:"Delete Access Token",content:`Are you sure to delete access token \`${c(l)}\`? You cannot undo this action.`,style:"danger",dialogName:"delete-access-token-dialog",onConfirm:async()=>{await xe.deleteUserAccessToken({name:t.name,accessToken:l}),s(r.filter(m=>m.accessToken!==l))}})},c=l=>`${l.slice(0,4)}****${l.slice(-4)}`;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-4 w-full flex flex-col justify-start items-start space-y-4",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"sm:flex-auto space-y-1",children:[e.jsxs("p",{className:"flex flex-row justify-start items-center font-medium text-gray-700 dark:text-gray-400",children:["Access Tokens",e.jsx(ke,{className:"ml-2",url:"https://usememos.com/docs/security/access-tokens"})]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-500",children:"A list of all access tokens for your account."})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx(k,{variant:"outlined",color:"neutral",onClick:()=>{Ms(o)},children:a("common.create")})})]}),e.jsx("div",{className:"mt-2 flow-root",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-zinc-600",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Token"}),e.jsx("th",{scope:"col",className:"py-2 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Description"}),e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Created At"}),e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Expires At"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4",children:e.jsx("span",{className:"sr-only",children:a("common.delete")})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-zinc-700",children:r.map(l=>{var m,d;return e.jsxs("tr",{children:[e.jsxs("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400 flex flex-row justify-start items-center gap-x-1",children:[e.jsx("span",{className:"font-mono",children:c(l.accessToken)}),e.jsx(E,{color:"neutral",variant:"plain",size:"sm",onClick:()=>n(l.accessToken),children:e.jsx(T.Clipboard,{className:"w-4 h-auto text-gray-400"})})]}),e.jsx("td",{className:"whitespace-nowrap py-2 pl-4 pr-3 text-sm text-gray-900 dark:text-gray-400",children:l.description}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:(m=l.issuedAt)==null?void 0:m.toLocaleString()}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-500 dark:text-gray-400",children:((d=l.expiresAt)==null?void 0:d.toLocaleString())??"Never"}),e.jsx("td",{className:"relative whitespace-nowrap py-2 pl-3 pr-4 text-right text-sm",children:e.jsx(E,{color:"danger",variant:"plain",size:"sm",onClick:()=>{i(l.accessToken)},children:e.jsx(T.Trash,{className:"w-4 h-auto"})})})]},l.accessToken)})})]})})})})]})})})},Os=()=>{const a=L(),t=se(),r=async s=>{const o=[];for await(const c of Kt.exportMemos({filter:`creator == "${s.name}"`}))o.push(c.file.buffer);const n=new Blob(o),i=window.URL.createObjectURL(n);Yt(i,"memos-export.zip"),URL.revokeObjectURL(i)};return e.jsxs("div",{className:"w-full gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("setting.account-section.title")}),e.jsxs("div",{className:"mt-1 flex flex-row justify-start items-center",children:[e.jsx(ht,{className:"mr-2",avatarUrl:t.avatarUrl}),e.jsxs("div",{className:"flex flex-col justify-center items-start",children:[e.jsx("span",{className:"text-2xl font-medium",children:t.nickname}),e.jsxs("span",{className:"-mt-2 text-base text-gray-500 dark:text-gray-400",children:["(",t.username,")"]})]})]}),e.jsxs("div",{className:"w-full flex flex-row justify-start items-center mt-2 space-x-2",children:[e.jsx(k,{variant:"outlined",onClick:Ls,children:a("common.edit")}),e.jsx(k,{variant:"outlined",onClick:Bs,children:a("setting.account-section.change-password")}),e.jsx(k,{variant:"outlined",onClick:()=>r(t),children:a("setting.account-section.export-memos")})]}),e.jsx(Hs,{})]})},Es=a=>{const{webhookId:t,destroy:r,onConfirm:s}=a,o=L(),[n,i]=p.useState({name:"",url:""}),c=pt(!1),l=t===void 0;p.useEffect(()=>{t&&je.getWebhook({id:t}).then(({webhook:x})=>{x&&i({name:x.name,url:x.url})})},[]);const m=x=>{i({...n,...x})},d=x=>{m({name:x.target.value})},g=x=>{m({url:x.target.value})},v=async()=>{if(!n.name||!n.url){w.error("Please fill all required fields");return}try{l?await je.createWebhook({name:n.name,url:n.url}):await je.updateWebhook({webhook:{id:t,name:n.name,url:n.url},updateMask:["name","url"]}),s(),r()}catch(x){console.error(x),w.error(x.details)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:l?"Create webhook":"Edit webhook"}),e.jsx(E,{size:"sm",onClick:()=>r(),children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container !w-80",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx(N,{className:"w-full",type:"text",placeholder:"An easy-to-remember name",value:n.name,onChange:d})})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mb-3",children:[e.jsxs("span",{className:"mb-2",children:["Payload URL ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("div",{className:"relative w-full",children:e.jsx(N,{className:"w-full",type:"text",placeholder:"https://example.com/postreceive",value:n.url,onChange:g})})]}),e.jsxs("div",{className:"w-full flex flex-row justify-end items-center mt-2 space-x-2",children:[e.jsx(k,{color:"neutral",variant:"plain",disabled:c.isLoading,loading:c.isLoading,onClick:r,children:o("common.cancel")}),e.jsx(k,{color:"primary",disabled:c.isLoading,loading:c.isLoading,onClick:v,children:o("common.create")})]})]})]})};function Vs(a){K({className:"create-webhook-dialog",dialogName:"create-webhook-dialog"},Es,{onConfirm:a})}const lt=async a=>{const{webhooks:t}=await je.listWebhooks({creatorId:a});return t},Js=()=>{const a=L(),t=se(),[r,s]=p.useState([]);p.useEffect(()=>{lt(t.id).then(i=>{s(i)})},[]);const o=async()=>{const i=await lt(t.id);s(i)},n=async i=>{ie({title:"Delete Webhook",content:`Are you sure to delete webhook \`${i.name}\`? You cannot undo this action.`,style:"danger",dialogName:"delete-webhook-dialog",onConfirm:async()=>{await je.deleteWebhook({id:i.id}),s(r.filter(c=>c.id!==i.id))}})};return e.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{className:"flex-auto space-y-1",children:e.jsx("p",{className:"flex flex-row justify-start items-center font-medium text-gray-700 dark:text-gray-400",children:"Webhooks"})}),e.jsx("div",{children:e.jsx(k,{variant:"outlined",color:"neutral",onClick:()=>{Vs(o)},children:a("common.create")})})]}),e.jsx("div",{className:"w-full mt-2 flow-root",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full border rounded-lg align-middle dark:border-zinc-600",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300 dark:divide-zinc-600",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Name"}),e.jsx("th",{scope:"col",className:"px-3 py-2 text-left text-sm font-semibold text-gray-900 dark:text-gray-400",children:"Url"}),e.jsx("th",{scope:"col",className:"relative px-3 py-2 pr-4",children:e.jsx("span",{className:"sr-only",children:a("common.delete")})})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-500",children:[r.map(i=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",children:i.name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",children:i.url}),e.jsx("td",{className:"relative whitespace-nowrap px-3 py-2 text-right text-sm",children:e.jsx(E,{color:"danger",variant:"plain",size:"sm",onClick:()=>{n(i)},children:e.jsx(T.Trash,{className:"w-4 h-auto"})})})]},i.id)),r.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"whitespace-nowrap px-3 py-2 text-sm text-gray-900 dark:text-gray-400",colSpan:3,children:"No webhooks found."})})]})]})})})}),e.jsx("div",{className:"w-full mt-2",children:e.jsxs(ae,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center hover:underline hover:text-blue-600",to:"https://usememos.com/docs/advanced-settings/webhook",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]})},Gs=()=>{const a=L(),t=Y(),r=Se(),s=r.userSetting,[o,n]=p.useState(s.telegramUserId),i=async g=>{await r.updateUserSetting({locale:g},["locale"]),t.setLocale(g)},c=async g=>{await r.updateUserSetting({appearance:g},["appearance"]),t.setAppearance(g)},l=async g=>{await r.updateUserSetting({memoVisibility:g},["memo_visibility"])},m=async()=>{try{await r.updateUserSetting({telegramUserId:o},["telegram_user_id"]),w.success(a("message.update-succeed"))}catch(g){console.error(g),w.error(g.response.data.message)}},d=async g=>{n(g)};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("common.basic")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("common.language")}),e.jsx(bt,{value:s.locale,onChange:i})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{children:a("setting.preference-section.theme")}),e.jsx(jt,{value:s.appearance,onChange:c})]}),e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("setting.preference")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"truncate",children:a("setting.preference-section.default-memo-visibility")}),e.jsx(De,{className:"!min-w-fit",value:s.memoVisibility,startDecorator:e.jsx(ga,{visibility:fa(s.memoVisibility)}),onChange:(g,v)=>{v&&l(v)},children:[Ae.PRIVATE,Ae.PROTECTED,Ae.PUBLIC].map(g=>va(g)).map(g=>e.jsx($e,{value:g,className:"whitespace-nowrap",children:a(`memo.visibility.${g.toLowerCase()}`)},g))})]}),e.jsx(X,{className:"!mt-3 !my-4"}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start",children:[e.jsxs("div",{className:"mb-2 w-full flex flex-row justify-between items-center",children:[e.jsx("div",{className:"w-auto flex items-center",children:e.jsx("span",{className:"mr-1",children:a("setting.preference-section.telegram-user-id")})}),e.jsx(k,{variant:"outlined",color:"neutral",onClick:m,children:a("common.save")})]}),e.jsx(N,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},value:o,onChange:g=>d(g.target.value),placeholder:a("setting.preference-section.telegram-user-id-placeholder")}),e.jsx("div",{className:"w-full",children:e.jsxs(ae,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center mt-2 hover:underline hover:text-blue-600",to:"https://usememos.com/docs/integration/telegram-bot",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]}),e.jsx(X,{className:"!my-4"}),e.jsx(Js,{})]})},Me=[{id:Te,name:"GitHub",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://github.com/login/oauth/authorize",tokenUrl:"https://github.com/login/oauth/access_token",userInfoUrl:"https://api.github.com/user",scopes:["read:user"],fieldMapping:{identifier:"login",displayName:"name",email:"email"}}}},{id:Te,name:"GitLab",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://gitlab.com/oauth/authorize",tokenUrl:"https://gitlab.com/oauth/token",userInfoUrl:"https://gitlab.com/oauth/userinfo",scopes:["openid"],fieldMapping:{identifier:"name",displayName:"name",email:"email"}}}},{id:Te,name:"Google",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:"https://oauth2.googleapis.com/token",userInfoUrl:"https://www.googleapis.com/oauth2/v2/userinfo",scopes:["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile"],fieldMapping:{identifier:"email",displayName:"name",email:"email"}}}},{id:Te,name:"Custom",type:"OAUTH2",identifierFilter:"",config:{oauth2Config:{clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",userInfoUrl:"",scopes:[],fieldMapping:{identifier:"",displayName:"",email:""}}}}],qs=a=>{const t=L(),r=[...new Set(Me.map(h=>h.type))],{confirmCallback:s,destroy:o,identityProvider:n}=a,[i,c]=p.useState({name:"",identifierFilter:""}),[l,m]=p.useState("OAUTH2"),[d,g]=p.useState({clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",userInfoUrl:"",scopes:[],fieldMapping:{identifier:"",displayName:"",email:""}}),[v,x]=p.useState(""),[f,S]=p.useState("GitHub"),y=n===void 0;p.useEffect(()=>{n&&(c({name:n.name,identifierFilter:n.identifierFilter}),m(n.type),n.type==="OAUTH2"&&(g(n.config.oauth2Config),x(n.config.oauth2Config.scopes.join(" "))))},[]),p.useEffect(()=>{if(!y)return;const h=Me.find(U=>U.name===f);h&&(c({name:h.name,identifierFilter:h.identifierFilter}),m(h.type),h.type==="OAUTH2"&&(g(h.config.oauth2Config),x(h.config.oauth2Config.scopes.join(" "))))},[f]);const b=()=>{o()},R=()=>!(i.name===""||l==="OAUTH2"&&(d.clientId===""||d.authUrl===""||d.tokenUrl===""||d.userInfoUrl===""||v===""||d.fieldMapping.identifier===""||y&&d.clientSecret==="")),V=async()=>{try{y?(await Qt({...i,type:l,config:{oauth2Config:{...d,scopes:v.split(" ")}}}),w.success(t("setting.sso-section.sso-created",{name:i.name}))):(await ea({id:n.id,type:l,...i,config:{oauth2Config:{...d,scopes:v.split(" ")}}}),w.success(t("setting.sso-section.sso-updated",{name:i.name})))}catch(h){console.error(h),w.error(h.response.data.message)}s&&s(),o()},C=h=>{g({...d,...h})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text ml-auto",children:t(y?"setting.sso-section.create-sso":"setting.sso-section.update-sso")}),e.jsx(E,{size:"sm",onClick:b,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container min-w-[19rem]",children:[y&&e.jsxs(e.Fragment,{children:[e.jsx($,{className:"!mb-1",level:"body-md",children:t("common.type")}),e.jsx(De,{className:"w-full mb-4",value:l,onChange:(h,U)=>m(U??l),children:r.map(h=>e.jsx($e,{value:h,children:h},h))}),e.jsx($,{className:"mb-2",level:"body-md",children:t("setting.sso-section.template")}),e.jsx(De,{className:"mb-1 h-auto w-full",value:f,onChange:(h,U)=>S(U??f),children:Me.map(h=>e.jsx($e,{value:h.name,children:h.name},h.name))}),e.jsx(X,{className:"!my-2"})]}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("common.name"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("common.name"),value:i.name,onChange:h=>c({...i,name:h.target.value}),fullWidth:!0}),e.jsx($,{className:"!mb-1",level:"body-md",children:t("setting.sso-section.identifier-filter")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.identifier-filter"),value:i.identifierFilter,onChange:h=>c({...i,identifierFilter:h.target.value}),fullWidth:!0}),e.jsx(X,{className:"!my-2"}),l==="OAUTH2"&&e.jsxs(e.Fragment,{children:[y&&e.jsxs("p",{className:"border rounded-md p-2 text-sm w-full mb-2 break-all",children:[t("setting.sso-section.redirect-url"),": ",Zt("/auth/callback")]}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.client-id"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.client-id"),value:d.clientId,onChange:h=>C({clientId:h.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.client-secret"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.client-secret"),value:d.clientSecret,onChange:h=>C({clientSecret:h.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.authorization-endpoint"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.authorization-endpoint"),value:d.authUrl,onChange:h=>C({authUrl:h.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.token-endpoint"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.token-endpoint"),value:d.tokenUrl,onChange:h=>C({tokenUrl:h.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.user-endpoint"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.user-endpoint"),value:d.userInfoUrl,onChange:h=>C({userInfoUrl:h.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.scopes"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.scopes"),value:v,onChange:h=>x(h.target.value),fullWidth:!0}),e.jsx(X,{className:"!my-2"}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.sso-section.identifier"),e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.identifier"),value:d.fieldMapping.identifier,onChange:h=>C({fieldMapping:{...d.fieldMapping,identifier:h.target.value}}),fullWidth:!0}),e.jsx($,{className:"!mb-1",level:"body-md",children:t("setting.sso-section.display-name")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.sso-section.display-name"),value:d.fieldMapping.displayName,onChange:h=>C({fieldMapping:{...d.fieldMapping,displayName:h.target.value}}),fullWidth:!0}),e.jsx($,{className:"!mb-1",level:"body-md",children:t("common.email")}),e.jsx(N,{className:"mb-2",placeholder:t("common.email"),value:d.fieldMapping.email,onChange:h=>C({fieldMapping:{...d.fieldMapping,email:h.target.value}}),fullWidth:!0})]}),e.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[e.jsx(k,{variant:"plain",color:"neutral",onClick:b,children:t("common.cancel")}),e.jsx(k,{onClick:V,disabled:!R(),children:t(y?"common.create":"common.update")})]})]})]})};function ct(a,t){K({className:"create-identity-provider-dialog",dialogName:"create-identity-provider-dialog"},qs,{identityProvider:a,confirmCallback:t})}const Xs=()=>{const a=L(),r=Y().state.systemStatus,[s]=p.useState({disablePasswordLogin:r.disablePasswordLogin}),[o,n]=p.useState([]);p.useEffect(()=>{i()},[]);const i=async()=>{const{data:l}=await ta();n(l)},c=async l=>{let m=a("setting.sso-section.confirm-delete",{name:l.name});s.disablePasswordLogin&&(m+=`

`+a("setting.sso-section.disabled-password-login-warning")),ie({title:a("setting.sso-section.delete-sso"),content:m,style:"danger",dialogName:"delete-identity-provider-dialog",onConfirm:async()=>{try{await aa(l.id)}catch(d){console.error(d),w.error(d.response.data.message)}await i()}})};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center gap-1",children:[e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx("span",{className:"font-mono text-gray-400",children:a("setting.sso-section.sso-list")}),e.jsx(ke,{url:"https://usememos.com/docs/advanced-settings/keycloak"})]}),e.jsx(k,{onClick:()=>ct(void 0,i),children:a("common.create")})]}),e.jsx(X,{}),o.map(l=>e.jsxs("div",{className:"py-2 w-full border-b last:border-b dark:border-zinc-700 flex flex-row items-center justify-between",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs("p",{className:"ml-2",children:[l.name,e.jsxs("span",{className:"text-sm ml-1 opacity-40",children:["(",l.type,")"]})]})}),e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs(qe,{children:[e.jsx(Xe,{size:"sm",children:e.jsx(T.MoreVertical,{className:"w-4 h-auto"})}),e.jsxs(Ke,{placement:"bottom-end",size:"sm",children:[e.jsx(te,{onClick:()=>ct(l,i),children:a("common.edit")}),e.jsx(te,{onClick:()=>c(l),children:a("common.delete")})]})]})})]},l.id)),o.length===0&&e.jsx("div",{className:"w-full mt-2 text-sm dark:border-zinc-700 opacity-60 flex flex-row items-center justify-between",children:e.jsx("p",{className:"",children:"No SSO found."})}),e.jsxs("div",{className:"w-full mt-4",children:[e.jsxs("p",{className:"text-sm",children:[a("common.learn-more"),":"]}),e.jsx(vt,{component:"ul",marker:"disc",size:"sm",children:e.jsx(Ee,{children:e.jsx(ae,{className:"text-sm text-blue-600 hover:underline",to:"https://www.usememos.com/docs/advanced-settings/keycloak",target:"_blank",children:"Configuring Keycloak for Authentication"})})})]})]})},ue=a=>{const{className:t}=a;return e.jsx("span",{className:`mx-0.5 text-red-500 font-bold ${t??""}`,children:"*"})},Ks=a=>{const t=L(),{destroy:r,storage:s,confirmCallback:o}=a,[n,i]=p.useState({name:""}),[c,l]=p.useState("S3"),[m,d]=p.useState({endPoint:"",region:"",accessKey:"",secretKey:"",path:"",bucket:"",urlPrefix:"",urlSuffix:"",presign:!1}),g=s===void 0;p.useEffect(()=>{s&&(i({name:s.name}),l(s.type),s.type==="S3"&&d(s.config.s3Config))},[]);const v=()=>{r()},x=()=>!(n.name===""||c==="S3"&&(m.endPoint===""||m.region===""||m.accessKey===""||m.secretKey===""||m.bucket==="")),f=async()=>{try{g?await sa({...n,type:c,config:{s3Config:m}}):await ra({id:s.id,type:c,...n,config:{s3Config:m}})}catch(y){console.error(y),w.error(y.response.data.message)}o&&o(),r()},S=y=>{d({...m,...y})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("span",{className:"title-text ml-auto",children:t(g?"setting.storage-section.create-storage":"setting.storage-section.update-storage")}),e.jsx(E,{size:"sm",onClick:v,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container min-w-[19rem]",children:[e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("common.name"),e.jsx(ue,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("common.name"),value:n.name,onChange:y=>i({...n,name:y.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.endpoint"),e.jsx(ue,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.s3-compatible-url"),value:m.endPoint,onChange:y=>S({endPoint:y.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.region"),e.jsx(ue,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.region-placeholder"),value:m.region,onChange:y=>S({region:y.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.accesskey"),e.jsx(ue,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.accesskey-placeholder"),value:m.accessKey,onChange:y=>S({accessKey:y.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.secretkey"),e.jsx(ue,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.secretkey-placeholder"),value:m.secretKey,onChange:y=>S({secretKey:y.target.value}),fullWidth:!0}),e.jsxs($,{className:"!mb-1",level:"body-md",children:[t("setting.storage-section.bucket"),e.jsx(ue,{})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.bucket-placeholder"),value:m.bucket,onChange:y=>S({bucket:y.target.value}),fullWidth:!0}),e.jsxs("div",{className:"flex flex-row items-center mb-1",children:[e.jsx($,{level:"body-md",children:t("setting.storage-section.path")}),e.jsx(ke,{className:"ml-1",title:t("setting.storage-section.path-description"),url:"https://usememos.com/docs/advanced-settings/local-storage"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.path-placeholder")+"/{year}/{month}/{filename}",value:m.path,onChange:y=>S({path:y.target.value}),fullWidth:!0}),e.jsx($,{className:"!mb-1",level:"body-md",children:t("setting.storage-section.url-prefix")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.url-prefix-placeholder"),value:m.urlPrefix,onChange:y=>S({urlPrefix:y.target.value}),fullWidth:!0}),e.jsx($,{className:"!mb-1",level:"body-md",children:t("setting.storage-section.url-suffix")}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.url-suffix-placeholder"),value:m.urlSuffix,onChange:y=>S({urlSuffix:y.target.value}),fullWidth:!0}),e.jsx(pa,{className:"mb-2",label:t("setting.storage-section.presign-placeholder"),checked:m.presign,onChange:y=>S({presign:y.target.checked})}),e.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[e.jsx(k,{variant:"plain",color:"neutral",onClick:v,children:t("common.cancel")}),e.jsx(k,{onClick:f,disabled:!x(),children:t(g?"common.create":"common.update")})]})]})]})};function dt(a,t){K({className:"create-storage-service-dialog",dialogName:"create-storage-service-dialog"},Ks,{storage:a,confirmCallback:t})}const Ys=a=>{const t=L(),{destroy:r,localStoragePath:s,confirmCallback:o}=a,n=Y(),[i,c]=p.useState(s||""),l=()=>{r()},m=async()=>{try{await G({name:"local-storage-path",value:JSON.stringify(i.trim())}),await n.fetchSystemStatus()}catch(d){if(console.error(d),d.response.data.error){const g=d.response.data.error,v=g.indexOf("internal=");if(v!==-1){const x=g.substring(v+9);w.error(x)}}else w.error(d.response.data.message)}o&&o(),r()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:t("setting.storage-section.update-local-path")}),e.jsx(E,{size:"sm",onClick:l,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container max-w-xs",children:[e.jsx("p",{className:"text-sm break-words mb-1",children:t("setting.storage-section.update-local-path-description")}),e.jsxs("div",{className:"flex flex-row items-center mb-2 gap-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-400 break-all",children:["e.g. ","assets/{timestamp}_{filename}"]}),e.jsx(ke,{url:"https://usememos.com/docs/advanced-settings/local-storage"})]}),e.jsx(N,{className:"mb-2",placeholder:t("setting.storage-section.local-storage-path"),fullWidth:!0,value:i,onChange:d=>c(d.target.value)}),e.jsxs("div",{className:"mt-2 w-full flex flex-row justify-end items-center space-x-1",children:[e.jsx(k,{variant:"plain",color:"neutral",onClick:l,children:t("common.cancel")}),e.jsx(k,{onClick:m,children:t("common.update")})]})]})]})};function Zs(a,t){K({className:"update-local-storage-dialog",dialogName:"update-local-storage-dialog"},Ys,{localStoragePath:a,confirmCallback:t})}const Qs=()=>{const a=L(),t=Y(),r=t.state.systemStatus,[s,o]=p.useState(r.storageServiceId),[n,i]=p.useState([]);p.useEffect(()=>{c()},[]);const c=async()=>{const{data:d}=await oa();i(d)},l=async d=>{await G({name:"storage-service-id",value:JSON.stringify(d)});try{await t.fetchSystemStatus()}catch(g){console.error(g)}o(d)},m=d=>{ie({title:a("setting.storage-section.delete-storage"),content:a("setting.storage-section.warning-text",{name:d.name}),style:"danger",dialogName:"delete-storage-dialog",onConfirm:async()=>{try{await na(d.id)}catch(g){console.error(g),w.error(g.response.data.message)}await c()}})};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("div",{className:"w-full flex flex-row justify-start items-center",children:e.jsx("span",{className:"font-mono text-sm text-gray-400 mr-2 dark:text-gray-500",children:a("setting.storage-section.current-storage")})}),e.jsxs(Ye,{className:"w-full",value:s,onChange:d=>{l(Number(d.target.value))},children:[e.jsx(pe,{value:"0",label:a("setting.storage-section.type-database")}),e.jsxs("div",{className:"w-full mt-2 flex flex-row justify-start items-center gap-x-2",children:[e.jsx(pe,{value:"-1",label:a("setting.storage-section.type-local")}),e.jsx(E,{size:"sm",onClick:()=>Zs(r.localStoragePath),children:e.jsx(T.PenBox,{className:"w-4 h-auto"})})]}),n.map(d=>e.jsx(pe,{value:d.id,label:d.name},d.id))]}),e.jsx(X,{className:"!my-2"}),e.jsxs("div",{className:"mb-2 w-full flex flex-row justify-between items-center gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-mono text-sm text-gray-400",children:a("setting.storage-section.storage-services")}),e.jsx(ke,{url:"https://usememos.com/docs/advanced-settings/cloudflare-r2"})]}),e.jsx(k,{onClick:()=>dt(void 0,c),children:a("common.create")})]}),e.jsxs("div",{className:"w-full flex flex-col",children:[n.map(d=>e.jsxs("div",{className:"py-2 w-full border-t last:border-b dark:border-zinc-700 flex flex-row items-center justify-between",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("p",{className:"ml-2",children:d.name})}),e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs(qe,{children:[e.jsx(Xe,{size:"sm",children:e.jsx(T.MoreVertical,{className:"w-4 h-auto"})}),e.jsxs(Ke,{placement:"bottom-end",size:"sm",children:[e.jsx(te,{onClick:()=>dt(d,c),children:a("common.edit")}),e.jsx(te,{onClick:()=>m(d),children:a("common.delete")})]})]})})]},d.id)),n.length===0&&e.jsx("div",{className:"w-full text-sm dark:border-zinc-700 opacity-60 flex flex-row items-center justify-between",children:e.jsx("p",{className:"",children:"No storage service found."})})]}),e.jsxs("div",{className:"w-full mt-4",children:[e.jsxs("p",{className:"text-sm",children:[a("common.learn-more"),":"]}),e.jsxs(vt,{component:"ul",marker:"disc",size:"sm",children:[e.jsx(Ee,{children:e.jsx(ae,{className:"text-sm text-blue-600 hover:underline",to:"https://www.usememos.com/docs/advanced-settings/local-storage",target:"_blank",children:"Docs - Local storage"})}),e.jsx(Ee,{children:e.jsx(ae,{className:"text-sm text-blue-600 hover:underline",to:"https://www.usememos.com/blog/choosing-a-storage-for-your-resource",target:"_blank",children:"Choosing a Storage for Your Resource: Database, S3 or Local Storage?"})})]})]})]})},er=({destroy:a})=>{const t=L(),r=Y(),s=r.state.systemStatus,[o,n]=p.useState({disablePasswordLogin:s.disablePasswordLogin}),[i,c]=p.useState(!1),[l,m]=p.useState(""),d=()=>{a()},g=()=>!i||l==="CONFIRM",v=async()=>{if(!i)c(!0);else{n({...o,disablePasswordLogin:!0}),r.setSystemStatus({disablePasswordLogin:!0});try{await G({name:"disable-password-login",value:JSON.stringify(!0)}),d()}catch(f){console.error(f),w.error(f.response.data.message||t("message.updating-setting-failed"))}}},x=f=>{const S=f.target.value;m(S)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container !w-64",children:[e.jsx("p",{className:"title-text",children:t("setting.system-section.disable-password-login")}),e.jsx(E,{size:"sm",onClick:d,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container !w-64",children:[i?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"content-text",children:t("setting.system-section.disable-password-login-final-warning")}),e.jsx(N,{value:l,onChange:x})]}):e.jsx("p",{className:"content-text",children:t("setting.system-section.disable-password-login-warning")}),e.jsxs("div",{className:"mt-4 w-full flex flex-row justify-end items-center space-x-2",children:[e.jsx(k,{variant:"plain",color:"neutral",onClick:d,children:t("common.close")}),e.jsx(k,{onClick:v,color:"danger",disabled:!g(),children:t("common.confirm")})]})]})]})};function tr(){K({className:"disable-password-login-dialog",dialogName:"disable-password-login-dialog"},er)}const ar=({destroy:a})=>{const t=L(),r=Y(),[s,o]=p.useState(r.state.systemStatus.customizedProfile),n=()=>{a()},i=f=>{o(S=>({...S,...f}))},c=f=>{i({name:f.target.value})},l=f=>{i({logoUrl:f.target.value})},m=f=>{i({description:f.target.value})},d=f=>{i({locale:f})},g=f=>{i({appearance:f})},v=()=>{i({name:"memos",logoUrl:"/logo.webp",description:"",locale:"en",appearance:"system",externalUrl:""})},x=async()=>{if(s.name===""){w.error(t("message.fill-server-name"));return}try{await G({name:"customized-profile",value:JSON.stringify(s)}),await r.fetchSystemStatus()}catch(f){console.error(f);return}w.success(t("message.succeed-update-customized-profile")),a()};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"dialog-header-container",children:[e.jsx("p",{className:"title-text",children:t("setting.system-section.customize-server.title")}),e.jsx(E,{size:"sm",onClick:n,children:e.jsx(T.X,{className:"w-5 h-auto"})})]}),e.jsxs("div",{className:"dialog-content-container min-w-[16rem]",children:[e.jsxs("p",{className:"text-sm mb-1",children:[t("setting.system-section.server-name"),e.jsxs("span",{className:"text-sm text-gray-400 ml-1",children:["(",t("setting.system-section.customize-server.default"),")"]})]}),e.jsx(N,{className:"w-full",type:"text",value:s.name,onChange:c}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.icon-url")}),e.jsx(N,{className:"w-full",type:"text",value:s.logoUrl,onChange:l}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.description")}),e.jsx(Je,{className:"w-full",minRows:"2",maxRows:"4",value:s.description,onChange:m}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.locale")}),e.jsx(bt,{className:"!w-full",value:s.locale,onChange:d}),e.jsx("p",{className:"text-sm mb-1 mt-2",children:t("setting.system-section.customize-server.appearance")}),e.jsx(jt,{className:"!w-full",value:s.appearance,onChange:g}),e.jsxs("div",{className:"mt-4 w-full flex flex-row justify-between items-center space-x-2",children:[e.jsx("div",{className:"flex flex-row justify-start items-center",children:e.jsx(k,{variant:"outlined",onClick:v,children:t("common.restore")})}),e.jsxs("div",{className:"flex flex-row justify-end items-center",children:[e.jsx(k,{variant:"plain",onClick:n,children:t("common.cancel")}),e.jsx(k,{onClick:x,children:t("common.save")})]})]})]})]})};function sr(){K({className:"update-customized-profile-dialog",dialogName:"update-customized-profile-dialog"},ar)}const rr=()=>{const a=L(),t=Y(),r=t.state.systemStatus,[s,o]=p.useState({allowSignUp:r.allowSignUp,disablePasswordLogin:r.disablePasswordLogin,additionalStyle:r.additionalStyle,additionalScript:r.additionalScript,disablePublicMemos:r.disablePublicMemos,maxUploadSizeMiB:r.maxUploadSizeMiB,memoDisplayWithUpdatedTs:r.memoDisplayWithUpdatedTs}),[n,i]=p.useState(""),[c,l]=p.useState("");p.useEffect(()=>{t.fetchSystemStatus()},[]),p.useEffect(()=>{ia().then(({data:u})=>{const P=u.find(W=>W.name==="telegram-bot-token");P&&i(P.value);const _=u.find(W=>W.name==="instance-url");_&&l(_.value)})},[]),p.useEffect(()=>{o({...s,allowSignUp:r.allowSignUp,disablePasswordLogin:r.disablePasswordLogin,additionalStyle:r.additionalStyle,additionalScript:r.additionalScript,disablePublicMemos:r.disablePublicMemos,maxUploadSizeMiB:r.maxUploadSizeMiB,memoDisplayWithUpdatedTs:r.memoDisplayWithUpdatedTs})},[r]);const m=async u=>{o({...s,allowSignUp:u}),t.setSystemStatus({allowSignUp:u}),await G({name:"allow-signup",value:JSON.stringify(u)})},d=async u=>{u?tr():ie({title:a("setting.system-section.enable-password-login"),content:a("setting.system-section.enable-password-login-warning"),style:"danger",dialogName:"enable-password-login-dialog",onConfirm:async()=>{o({...s,disablePasswordLogin:u}),t.setSystemStatus({disablePasswordLogin:u}),await G({name:"disable-password-login",value:JSON.stringify(u)})}})},g=()=>{sr()},v=u=>{l(u)},x=async()=>{try{await G({name:"instance-url",value:c})}catch(u){console.error(u),w.error(u.response.data.message);return}w.success("Instance URL updated")},f=u=>{i(u)},S=async()=>{try{await G({name:"telegram-bot-token",value:n})}catch(u){console.error(u),w.error(u.response.data.message);return}w.success("Telegram Bot Token updated")},y=u=>{o({...s,additionalStyle:u})},b=async()=>{try{await G({name:"additional-style",value:JSON.stringify(s.additionalStyle)})}catch(u){w.error(u.response.data.message),console.error(u);return}w.success(a("message.succeed-update-additional-style"))},R=u=>{o({...s,additionalScript:u})},V=async()=>{try{await G({name:"additional-script",value:JSON.stringify(s.additionalScript)})}catch(u){w.error(u.response.data.message),console.error(u);return}w.success(a("message.succeed-update-additional-script"))},C=async u=>{o({...s,disablePublicMemos:u}),t.setSystemStatus({disablePublicMemos:u}),await G({name:"disable-public-memos",value:JSON.stringify(u)})},h=async u=>{o({...s,memoDisplayWithUpdatedTs:u}),t.setSystemStatus({memoDisplayWithUpdatedTs:u}),await G({name:"memo-display-with-updated-ts",value:JSON.stringify(u)})},U=async u=>{u.target.selectionEnd=u.target.value.length;let P=parseInt(u.target.value);Number.isNaN(P)&&(P=0),o({...s,maxUploadSizeMiB:P}),u.target.value=P.toString(),t.setSystemStatus({maxUploadSizeMiB:P}),await G({name:"max-upload-size-mib",value:JSON.stringify(P)})},z=u=>{u.target.select()};return e.jsxs("div",{className:"w-full flex flex-col gap-2 pt-2 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("common.basic")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"normal-text",children:[a("setting.system-section.server-name"),": ",e.jsx("span",{className:"font-mono font-bold",children:r.customizedProfile.name})]}),e.jsx(k,{onClick:g,children:a("common.edit")})]}),e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-500",children:a("common.settings")}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"normal-text",children:a("setting.system-section.allow-user-signup")}),e.jsx(Re,{checked:s.allowSignUp,onChange:u=>m(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"normal-text",children:a("setting.system-section.disable-password-login")}),e.jsx(Re,{checked:s.disablePasswordLogin,onChange:u=>d(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"normal-text",children:a("setting.system-section.disable-public-memos")}),e.jsx(Re,{checked:s.disablePublicMemos,onChange:u=>C(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"normal-text",children:a("setting.system-section.display-with-updated-time")}),e.jsx(Re,{checked:s.memoDisplayWithUpdatedTs,onChange:u=>h(u.target.checked)})]}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"text-sm mr-1",children:a("setting.system-section.max-upload-size")}),e.jsx(xt,{title:a("setting.system-section.max-upload-size-hint"),placement:"top",children:e.jsx(T.HelpCircle,{className:"w-4 h-auto"})})]}),e.jsx(N,{className:"w-16",sx:{fontFamily:"monospace"},defaultValue:s.maxUploadSizeMiB,onFocus:z,onChange:U})]}),e.jsx(X,{className:"!mt-3 !my-4"}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("div",{className:"w-auto flex items-center",children:e.jsx("span",{className:"text-sm mr-1",children:"Instance URL"})})}),e.jsx(k,{variant:"outlined",color:"neutral",onClick:x,children:a("common.save")})]}),e.jsx(N,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},placeholder:"Should be started with http:// or https://",value:c,onChange:u=>v(u.target.value)}),e.jsx("div",{className:"w-full",children:e.jsxs(ae,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center mt-2 hover:underline hover:text-blue-600",to:"https://usememos.com/docs/advanced-settings/seo",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})}),e.jsx(X,{className:"!mt-3 !my-4"}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("div",{className:"w-auto flex items-center",children:e.jsx("span",{className:"text-sm mr-1",children:a("setting.system-section.telegram-bot-token")})})}),e.jsx(k,{variant:"outlined",color:"neutral",onClick:S,children:a("common.save")})]}),e.jsx(N,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},placeholder:a("setting.system-section.telegram-bot-token-placeholder"),value:n,onChange:u=>f(u.target.value)}),e.jsx("div",{className:"w-full",children:e.jsxs(ae,{className:"text-gray-500 text-sm inline-flex flex-row justify-start items-center mt-2 hover:underline hover:text-blue-600",to:"https://usememos.com/docs/integration/telegram-bot",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})}),e.jsx(X,{className:"!mt-3 !my-4"}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[e.jsx("span",{className:"normal-text",children:a("setting.system-section.additional-style")}),e.jsx(k,{variant:"outlined",color:"neutral",onClick:b,children:a("common.save")})]}),e.jsx(Je,{className:"w-full",sx:{fontFamily:"monospace",fontSize:"14px"},minRows:2,maxRows:4,placeholder:a("setting.system-section.additional-style-placeholder"),value:s.additionalStyle,onChange:u=>y(u.target.value)}),e.jsxs("div",{className:"w-full flex flex-row justify-between items-center mt-2",children:[e.jsx("span",{className:"normal-text",children:a("setting.system-section.additional-script")}),e.jsx(k,{variant:"outlined",color:"neutral",onClick:V,children:a("common.save")})]}),e.jsx(Je,{className:"w-full",color:"neutral",sx:{fontFamily:"monospace",fontSize:"14px"},minRows:2,maxRows:4,placeholder:a("setting.system-section.additional-script-placeholder"),value:s.additionalScript,onChange:u=>R(u.target.value)}),e.jsx("div",{className:"w-full",children:e.jsxs(ae,{className:"text-gray-500 text-sm flex flex-row justify-start items-center mt-2 hover:underline hover:text-blue-600",to:"https://usememos.com/docs/advanced-settings/custom-style-and-script",target:"_blank",children:[a("common.learn-more"),e.jsx(T.ExternalLink,{className:"inline w-4 h-auto ml-1"})]})})]})},jr=()=>{const a=L(),t=se(),r=Y(),[s,o]=p.useState({selectedSection:"my-account"}),n=t.role===he.HOST,i=l=>{o({selectedSection:l})},c=()=>{let l=["my-account","preference"];return n&&(l=l.concat(["member","system","storage","sso"])),l};return e.jsxs("section",{className:"@container w-full max-w-5xl min-h-full flex flex-col justify-start items-start sm:pt-3 md:pt-6 pb-8",children:[e.jsx(la,{}),e.jsx("div",{className:"w-full px-4 sm:px-6",children:e.jsxs("div",{className:"w-full shadow flex flex-row justify-start items-start px-4 py-3 rounded-xl bg-white dark:bg-zinc-800 text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"hidden sm:flex flex-col justify-start items-start w-40 h-auto shrink-0 py-2",children:[e.jsx("span",{className:"text-sm mt-0.5 pl-3 font-mono text-gray-400 dark:text-gray-500",children:a("common.basic")}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mt-1",children:[e.jsxs("span",{className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg hover:opacity-80 ${s.selectedSection==="my-account"?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,onClick:()=>i("my-account"),children:[e.jsx(T.User,{className:"w-4 h-auto mr-2 opacity-80"})," ",a("setting.my-account")]}),e.jsxs("span",{className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg hover:opacity-80 ${s.selectedSection==="preference"?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,onClick:()=>i("preference"),children:[e.jsx(T.Cog,{className:"w-4 h-auto mr-2 opacity-80"})," ",a("setting.preference")]})]}),n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm mt-4 pl-3 font-mono text-gray-400 dark:text-gray-500",children:a("common.admin")}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start mt-1",children:[e.jsxs("span",{onClick:()=>i("member"),className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg hover:opacity-80 ${s.selectedSection==="member"?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,children:[e.jsx(T.Users,{className:"w-4 h-auto mr-2 opacity-80"})," ",a("setting.member")]}),e.jsxs("span",{onClick:()=>i("system"),className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg hover:opacity-80 ${s.selectedSection==="system"?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,children:[e.jsx(T.Settings2,{className:"w-4 h-auto mr-2 opacity-80"})," ",a("setting.system")]}),e.jsxs("span",{onClick:()=>i("storage"),className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg hover:opacity-80 ${s.selectedSection==="storage"?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,children:[e.jsx(T.Database,{className:"w-4 h-auto mr-2 opacity-80"})," ",a("setting.storage")]}),e.jsxs("span",{onClick:()=>i("sso"),className:`w-auto px-3 leading-8 flex flex-row justify-start items-center cursor-pointer rounded-lg hover:opacity-80 ${s.selectedSection==="sso"?"bg-zinc-100 shadow dark:bg-zinc-900":""}`,children:[e.jsx(T.Key,{className:"w-4 h-auto mr-2 opacity-80"})," ",a("setting.sso")]}),e.jsxs("span",{className:"px-3 mt-2 opacity-70 text-sm",children:["Version: v",r.state.systemStatus.profile.version]})]})]}):null]}),e.jsxs("div",{className:"w-full grow sm:pl-4 overflow-x-auto",children:[e.jsx("div",{className:"w-auto inline-block my-2 sm:hidden",children:e.jsx(De,{value:s.selectedSection,onChange:(l,m)=>i(m),children:c().map(l=>e.jsx($e,{value:l,children:a(`setting.${l}`)},l))})}),s.selectedSection==="my-account"?e.jsx(Os,{}):s.selectedSection==="preference"?e.jsx(Gs,{}):s.selectedSection==="member"?e.jsx($s,{}):s.selectedSection==="system"?e.jsx(rr,{}):s.selectedSection==="storage"?e.jsx(Qs,{}):s.selectedSection==="sso"?e.jsx(Xs,{}):null]})]})})]})};export{jr as default};
