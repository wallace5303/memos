import{u as L,a as C,b,c as k,r as m,j as e,d as U,e as z,n as u}from"./index-wLWO9-d2.js";import{L as A,A as B}from"./LocaleSelect-CC0qROH_.js";import{u as I,I as d}from"./useLoading-1GM5JUMl.js";import{B as P}from"./Button-Y8r740D0.js";import"./Select-Gl6RUiyX.js";import"./createSvgIcon-LnoQSaos.js";const G=()=>{const a=L(),x=C(),l=b(),f=k(),t=I(!1),{appearance:p,locale:g,systemStatus:n}=l.state,[r,h]=m.useState(""),[o,j]=m.useState(""),w=s=>{const i=s.target.value;h(i)},y=s=>{const i=s.target.value;j(i)},N=s=>{l.setLocale(s)},v=s=>{l.setAppearance(s)},S=s=>{s.preventDefault(),c()},c=async()=>{if(!(r===""||o==="")&&!t.isLoading){try{t.setLoading();const{user:s}=await z.signUp({username:r,password:o});s?(await f.fetchCurrentUser(),x("/")):u.error(a("message.signup-failed"))}catch(s){console.error(s),u.error(s.response.data.message||s.message||a("message.signup-failed"))}t.setFinish()}};return e.jsxs("div",{className:"py-4 sm:py-8 w-80 max-w-full min-h-[100svh] mx-auto flex flex-col justify-start items-center",children:[e.jsxs("div",{className:"w-full py-4 grow flex flex-col justify-center items-center",children:[e.jsxs("div",{className:"w-full flex flex-row justify-center items-center mb-6",children:[e.jsx("img",{className:"h-14 w-auto rounded-full shadow",src:n.customizedProfile.logoUrl,alt:""}),e.jsx("p",{className:"ml-2 text-5xl text-black opacity-80 dark:text-gray-200",children:n.customizedProfile.name})]}),e.jsx("p",{className:"w-full text-2xl mt-2 dark:text-gray-500",children:a("auth.create-your-account")}),e.jsxs("form",{className:"w-full mt-2",onSubmit:S,children:[e.jsxs("div",{className:"flex flex-col justify-start items-start w-full gap-4",children:[e.jsxs("div",{className:"w-full flex flex-col justify-start items-start gap-2",children:[e.jsx("span",{className:"leading-8 text-gray-600",children:a("common.username")}),e.jsx(d,{className:"w-full",size:"lg",type:"text",readOnly:t.isLoading,placeholder:a("common.username"),value:r,onChange:w,required:!0})]}),e.jsxs("div",{className:"w-full flex flex-col justify-start items-start gap-2",children:[e.jsx("span",{className:"leading-8 text-gray-600",children:a("common.password")}),e.jsx(d,{className:"w-full",size:"lg",type:"password",readOnly:t.isLoading,placeholder:a("common.password"),value:o,onChange:y,required:!0})]})]}),e.jsx("div",{className:"flex flex-row justify-end items-center w-full mt-6",children:e.jsx(P,{className:"w-full",size:"md",type:"submit",disabled:t.isLoading,loading:t.isLoading,onClick:c,children:a("common.sign-up")})})]}),!n.host&&e.jsx("p",{className:"w-full mt-4 text-sm font-medium dark:text-gray-500",children:a("auth.host-tip")}),e.jsxs("p",{className:"w-full mt-4 text-sm",children:[e.jsx("span",{className:"dark:text-gray-500",children:a("auth.sign-in-tip")}),e.jsx(U,{to:"/auth",className:"cursor-pointer ml-2 text-blue-600 hover:underline",unstable_viewTransition:!0,children:a("common.sign-in")})]})]}),e.jsxs("div",{className:"mt-4 flex flex-row items-center justify-center w-full gap-2",children:[e.jsx(A,{value:g,onChange:N}),e.jsx(B,{value:p,onChange:v})]})]})};export{G as default};
